(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],[,,,,,,,,,,,function(e,t,s){e.exports=s.p+"static/media/crown.ca838bd2.png"},function(e,t,s){e.exports=s(28)},,,,,function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},,function(e,t,s){"use strict";s.r(t);var n=s(0),r=s.n(n),a=s(9),i=s.n(a),o=s(2),c=s(3),u=s(5),m=s(4),l=s(6),d=(s(17),s(18),{app:{title:"Amazing TODO-List",btnRegister:"Register",btnLogOut:"Log out",leftPanel:"Amazing Left Panel",rightPanel:"Amazing Right Panel",footer:"Amazing Footer",copyright:"\xa9 2019 Copyright Text",successfulRegister:"Registration successful",LogOutErrormessage:"LogOut not successful"},errorIndicator:{message:"Something is terribly wrong."},taskList:{btnEdit:"Edit",btnDelete:"Delete",btnAdd:"Add",btnCancel:"Cancel",btnBack:"Back",tasksHeaderBefore:"",tasksHeaderAfter:"'s tasks:",addPlaceholder:"Enter task title",noTasksHint:"Create a new task."},loginScreen:{title:"Enter your name and password",namePlaceholder:"Name",passwordPlaceholder:"Password",btnLogIn:"Log In",messages:{nameEmpty:"Name field is empty!",passEmpty:"Password field is empty!",nameError:"Name incorrect",passError:"Password incorrect",detectedActiveSession:"This user now in system.",brutForce:"Too many try log in with incorrect password.",unknownError:"Wooops, something terrible wrong."}},registerScreen:{title:"Create your name and password",namePlaceholder:"Name",btnCheck:"Check",passwordPlaceholder:"Password",confirmPlaceholder:"Confirm password",btnRegister:"Register",messages:{nameIsFree:"This name is free.",nameNotAFree:"This name is occupied.",unknownError:"Wooops, something terrible wrong.",noEqualPasswords:"Passwords not a equal.",nameEmpty:"Name field is empty!",passEmpty:"Password field is empty!"}},usersList:{noUsersHint:"No users in database.",btnDelete:"Delete",btnTasks:"Tasks",usersHeader:"Users:"}}),p={app:{title:"\u041d\u0435\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b",btnRegister:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",btnLogOut:"\u0412\u044b\u0439\u0442\u0438",leftPanel:"\u041d\u0435\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u0430\u044f \u043b\u0435\u0432\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c",rightPanel:"\u041d\u0435\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u0430\u044f \u043f\u0440\u0430\u0432\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c",footer:"\u041d\u0435\u0432\u0435\u0440\u043e\u044f\u0442\u043d\u044b\u0439 \u0444\u0443\u0442\u0435\u0440",copyright:"\xa9 2019 \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b",successfulRegister:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430",LogOutErrormessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430."},errorIndicator:{message:"\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c."},taskList:{btnEdit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",btnDelete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",btnAdd:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",btnCancel:"\u0412\u044b\u0439\u0442\u0438",btnBack:"\u041d\u0430\u0437\u0430\u0434",tasksHeaderBefore:"\u0417\u0430\u0434\u0430\u0447\u0438 ",tasksHeaderAfter:"\u0430:",addPlaceholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",noTasksHint:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c."},loginScreen:{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044c",namePlaceholder:"\u0418\u043c\u044f",passwordPlaceholder:"\u041f\u0430\u0440\u043e\u043b\u044c",btnLogIn:"\u0412\u043e\u0439\u0442\u0438",messages:{nameEmpty:"\u041f\u043e\u043b\u0435 \u0438\u043c\u0435\u043d\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c.",passEmpty:"\u041f\u043e\u043b\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c.",nameError:"\u041d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c.",passError:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0432\u0435\u0440\u0435\u043d.",detectedActiveSession:"\u042d\u0442\u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.",brutForce:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0432\u0445\u043e\u0434\u0430 \u0441 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c \u043f\u0430\u0440\u043e\u043b\u0435\u043c.",unknownError:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."}},registerScreen:{title:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u0441\u0435\u0431\u0435 \u0438\u043c\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044c",namePlaceholder:"\u0418\u043c\u044f",btnCheck:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c",passwordPlaceholder:"\u041f\u0430\u0440\u043e\u043b\u044c",confirmPlaceholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",btnRegister:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",messages:{nameIsFree:"\u042d\u0442\u043e \u0438\u043c\u044f \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e.",nameNotAFree:"\u042d\u0442\u043e \u0438\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u043e.",unknownError:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.",noEqualPasswords:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442.",nameEmpty:"\u041f\u043e\u043b\u0435 \u0438\u043c\u0435\u043d\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c.",passEmpty:"\u041f\u043e\u043b\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."}},usersList:{noUsersHint:"\u0412 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.",btnDelete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",btnTasks:"\u0417\u0430\u0434\u0430\u0447\u0438",usersHeader:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438:"}},f=(s(19),s(20),s(21),function(){return r.a.createElement("div",{className:"loader"},"Loading...")}),h=(s(22),function(e){return r.a.createElement("div",{className:"error-indicator"},e.texts.errorIndicator.message)}),g=function(e){return function(t){function s(){var e,t;Object(o.a)(this,s);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=Object(u.a)(this,(e=Object(m.a)(s)).call.apply(e,[this].concat(r)))).state={data:null,loading:!0,error:!1},t.addItem=function(){var e;t.setState({loading:!0,error:!1}),(e=t.props).addItem.apply(e,arguments).then((function(){t.update()})).catch((function(){t.setState({error:!0,loading:!1})}))},t.removeItem=function(){var e;t.setState({loading:!0,error:!1}),(e=t.props).removeItem.apply(e,arguments).then((function(){t.update()})).catch((function(){t.setState({error:!0,loading:!1})}))},t.editItem=function(){var e;t.setState({loading:!0,error:!1}),(e=t.props).editItem.apply(e,arguments).then((function(){t.update()})).catch((function(){t.setState({error:!0,loading:!1})}))},t}return Object(l.a)(s,t),Object(c.a)(s,[{key:"componentDidUpdate",value:function(e){this.props.getData!==e.getData&&this.update()}},{key:"componentDidMount",value:function(){this.update()}},{key:"update",value:function(){var e=this;this.setState({loading:!0,error:!1}),this.props.getData(this.props.name).then((function(t){e.setState({data:t,loading:!1})})).catch((function(){e.setState({error:!0,loading:!1})}))}},{key:"render",value:function(){var t=this.state,s=t.data,n=t.loading,a=t.error;return n?r.a.createElement(f,null):a?r.a.createElement(h,{texts:this.props.texts}):r.a.createElement(e,Object.assign({},this.props,{data:s,addItem:this.addItem,removeItem:this.removeItem,editItem:this.editItem}))}}]),s}(n.Component)},v=function(e){return function(t){function s(){var e,t;Object(o.a)(this,s);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=Object(u.a)(this,(e=Object(m.a)(s)).call.apply(e,[this].concat(r)))).state={response:null,loading:!1,error:!1},t.request=function(){var e;t.setState({loading:!0,error:!1}),(e=t.props).request.apply(e,arguments).then((function(e){t.setState({response:e,loading:!1})})).catch((function(){t.setState({error:!0,loading:!1})}))},t}return Object(l.a)(s,t),Object(c.a)(s,[{key:"render",value:function(){var t=this.state,s=t.response,n=t.loading;return t.error?r.a.createElement(h,{texts:this.props.texts}):r.a.createElement(e,Object.assign({},this.props,{response:s,isLoading:n,request:this.request}))}}]),s}(n.Component)},k=s(10),b=s.n(k),w=g(function(e){function t(){var e,s;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(s=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).editId=0,s.editHandler=function(e,t){s.editId=e,document.querySelector("#edit-input").value=t},s.addItem=function(){var e=document.querySelector("#add-input").value;console.log(e),""!==e.trim()&&s.props.addItem(s.props.name,e)},s.editItem=function(){var e=document.querySelector("#edit-input").value;""!==e.trim()&&s.props.editItem(s.props.name,s.editId,e)},s}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){b.a.AutoInit()}},{key:"render",value:function(){var e=this,t=this.props.texts.taskList,s=0===this.props.data.length?r.a.createElement("div",{className:"no-tasks-hint"},t.noTasksHint):this.props.data.map((function(s){var n=s.id,a=s.title;return r.a.createElement("div",{key:n,className:"task-list-item"},a,r.a.createElement("div",null,r.a.createElement("button",{className:"cyan btn waves-effect waves-light modal-trigger",href:"#edit-modal",onClick:function(){return e.editHandler(n,a)}},t.btnEdit),r.a.createElement("button",{className:"red btn waves-effect waves-light remove-btn",onClick:function(){return e.props.removeItem(e.props.name,n)}},t.btnDelete)))}));return r.a.createElement("div",{className:"task-list"},this.props.isAdmin&&r.a.createElement("button",{className:"cyan btn waves-effect waves-light modal-trigger",style:{margin:"15px"},href:"#edit-modal",onClick:this.props.backToUsersList},t.btnBack),r.a.createElement("div",{className:"tasks-header"},t.tasksHeaderBefore,this.props.name,t.tasksHeaderAfter),s,r.a.createElement("div",{className:"add-form"},r.a.createElement("input",{type:"text",id:"add-input",placeholder:t.addPlaceholder}),r.a.createElement("button",{onClick:this.addItem,className:"add-button waves-effect waves-light btn blue darken-2"},t.btnAdd)),r.a.createElement("div",{id:"edit-modal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h4",null,"Edit task"),r.a.createElement("input",{type:"text",id:"edit-input"})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{className:"modal-close waves-effect waves-green btn-flat",onClick:this.editItem},t.btnEdit),r.a.createElement("a",{className:"modal-close waves-effect waves-green btn-flat"},t.btnCancel))))}}]),t}(n.Component)),E=(s(24),v(function(e){function t(){var e,s;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(s=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",password:"",msg:""},s.nameHandler=function(e){s.setState({name:e.target.value.trim()})},s.passHandler=function(e){s.setState({password:e.target.value.trim()})},s.submitHandler=function(){var e=s.props.texts.loginScreen.messages;""!==s.state.name?""!==s.state.password?s.props.request(s.state.name,s.state.password):s.setState({msg:e.passEmpty}):s.setState({msg:e.nameEmpty})},s}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.response!==this.props.response){var t=this.props.response,s=this.props.texts.loginScreen.messages;if(t.isLogIn)this.props.logged(t.isLogIn,t.isAdmin,this.state.name);else switch(t.reason){case"password":return void this.setState({password:"",msg:s.passError});case"name":return void this.setState({name:"",password:"",msg:s.nameError});case"brutForce":return void this.setState({name:"",password:"",msg:s.brutForce});case"session":return void this.setState({name:"",password:"",msg:s.detectedActiveSession});default:this.setState({msg:s.unknownError})}}}},{key:"render",value:function(){var e=this.props.texts.loginScreen;return this.props.isLoading?r.a.createElement(f,null):r.a.createElement("div",{className:"login-screen"},r.a.createElement("h3",{className:"login-title"},e.title),r.a.createElement("input",{type:"text",placeholder:e.namePlaceholder,id:"name",value:this.state.name,onChange:this.nameHandler}),r.a.createElement("input",{type:"password",placeholder:e.passwordPlaceholder,id:"password",value:this.state.password,onChange:this.passHandler}),r.a.createElement("button",{className:"submit-btn waves-effect waves-light btn blue darken-2",onClick:this.submitHandler},e.btnLogIn),r.a.createElement("div",{className:"message"},this.state.msg))}}]),t}(n.Component))),_=(s(25),v(function(e){function t(){var e,s;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(s=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",password:"",confirmPassword:"",msg:""},s.checkName=function(){var e=document.querySelector("#name").value;""!==e?s.props.request(e,""):s.setState({msg:s.props.texts.registerScreen.messages.nameEmpty})},s.nameHandler=function(e){s.setState({name:e.target.value.trim()})},s.passHandler=function(e){s.setState({password:e.target.value.trim()})},s.confirmPassHandler=function(e){e.target.value.trim()===s.state.password?s.setState({confirmPassword:e.target.value.trim(),msg:""}):s.setState({confirmPassword:e.target.value.trim(),msg:s.props.texts.registerScreen.messages.noEqualPasswords})},s.registerHandler=function(){var e=s.props.texts.registerScreen.messages;""!==s.state.name?""!==s.state.password?s.state.password===s.state.confirmPassword?s.props.request(s.state.name,s.state.password):s.setState({msg:e.noEqualPasswords}):s.setState({msg:e.passEmpty}):s.setState({msg:e.nameEmpty})},s}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.response!==this.props.response){var t=this.props.response,s=this.props.texts.registerScreen.messages;t.isFree&&t.register?this.props.registerSuccess():!t.isFree||t.register?t.isFree?this.setState({msg:s.unknownError}):this.setState({msg:s.nameNotAFree}):this.setState({msg:s.nameIsFree})}}},{key:"render",value:function(){var e=this.props.texts.registerScreen,t=this.props.isLoading?r.a.createElement(f,null):this.state.msg;return r.a.createElement("div",null,r.a.createElement("div",{className:"register-screen"},r.a.createElement("h3",{className:"register-title"},e.title),r.a.createElement("div",{className:"name-field"},r.a.createElement("input",{type:"text",placeholder:e.namePlaceholder,id:"name",onChange:this.nameHandler,value:this.state.name}),r.a.createElement("button",{className:"btn-check waves-effect waves-light btn blue darken-2",onClick:this.checkName},e.btnCheck)),r.a.createElement("input",{type:"password",placeholder:e.passwordPlaceholder,id:"password",onChange:this.passHandler,value:this.state.password}),r.a.createElement("input",{type:"password",placeholder:e.confirmPlaceholder,id:"confirm-password",onChange:this.confirmPassHandler,value:this.state.confirmPassword}),r.a.createElement("button",{className:"submit-btn waves-effect waves-light btn blue darken-2",onClick:this.registerHandler},e.btnRegister),r.a.createElement("div",{className:"message"},t)))}}]),t}(n.Component))),y=(s(26),s(11)),S=s.n(y),N=g((function(e){var t=e.texts.usersList,s=0===e.data.length?r.a.createElement("div",{className:"no-users-hint"},t.noUsersHint):e.data.map((function(s){var n=s.name,a=s.isAdmin;return r.a.createElement("div",{key:n,className:"users-list-item"},r.a.createElement("div",{className:"name-wrapper"},r.a.createElement("span",null,n),a&&r.a.createElement("img",{src:S.a,className:"crown-img"})),r.a.createElement("div",null,r.a.createElement("button",{className:"blue darken-2 btn waves-effect waves-light remove-btn",onClick:function(){return e.showUserTasks(n)}},t.btnTasks),r.a.createElement("button",{className:"red btn waves-effect waves-light remove-btn",onClick:function(){return e.removeItem(n)}},t.btnDelete)))}));return r.a.createElement("div",{className:"users-list"},r.a.createElement("div",{className:"users-header"},t.usersHeader),s)})),T=function(e){var t;switch(e.screen){case"login":t=r.a.createElement(E,{request:e.server.logIn,logged:e.logged,name:e.name,texts:e.texts});break;case"register":t=r.a.createElement(_,{request:e.server.addUser,texts:e.texts,registerSuccess:e.registerSuccess});break;case"taskList":t=r.a.createElement(w,{getData:e.server.getTasks,addItem:e.server.addTask,removeItem:e.server.removeTask,editItem:e.server.editTask,backToUsersList:e.backToUsersList,isAdmin:e.isAdmin,name:e.name,texts:e.texts});break;case"usersList":t=r.a.createElement(N,{texts:e.texts,getData:e.server.getUsers,removeItem:e.server.removeUser,showUserTasks:e.showUserTasks});break;default:t=r.a.createElement(E,{request:e.server.logIn,logged:e.logged,name:e.name,texts:e.texts})}return r.a.createElement("div",{className:"content"},t)},x=s(1),I=s.n(x),A=s(7),O=function e(){var t=this;Object(o.a)(this,e),this._users=[{id:0,name:"admin",password:"admin",isAdmin:!0,tasks:[{id:0,title:"Drink coffee"},{id:1,title:"Create TODO-list"},{id:2,title:"Drink more coffee"},{id:3,title:"Refactor TODO-list"}],maxId:3,brutCount:0},{id:1,name:"littel",password:"8361035",isAdmin:!1,tasks:[{id:0,title:"Drink coffee"},{id:1,title:"Feed the cat"},{id:2,title:"Drink beer"},{id:3,title:"Kill all 'polovtsev'"}],maxId:3,brutCount:0}],this._sessions=[],this._maxId=1,this._serverDelay=500,this._BRUTLIMIT=3,this.request=function(e,s){switch(e){case"login":return t._checkRegistration(s)?t._checkActiveSession(s)||t._isBrutForce(s)?t._denial("brutForce"):t._addSession(s):t._denial(t._wrongPassOrName(s));case"logOut":if(t._checkActiveSession(s))return t._endSession(s);case"getUsers":return t._checkActiveSession(s)&&t._isAdminSession(s)?t._getUsers():t._error("no access");case"addUser":return t._noEmptyPassAndName(s)&&t._nameIsFree(s)?t._addUser(s):t._error("registration failed");case"removeUser":return t._isAdminSession(s)||t._nameIsFree(s)?t._removeUser(s):t._error("no access");case"checkUser":return t._checkUser(s);case"getTasks":return t._checkActiveSession(s)||t._isAdminSession(s)?t._getTasks(s):t._error("no access");case"addTask":return t._checkActiveSession(s)||t._isAdminSession(s)?t._addTask(s):t._error("no access");case"removeTask":return t._checkActiveSession(s)||t._isAdminSession(s)?t._removeTask(s):t._error("no access");case"editTask":return t._checkActiveSession(s)||t._isAdminSession(s)?t._editTask(s):t._error("no access")}},this._checkActiveSession=function(e){var s=e.name,n=e.token,r=t._sessions.find((function(e){return e.name===s}));return!!r&&r.token===n},this._isAdminSession=function(e){var s=e.name,n=e.token;if(t._checkActiveSession({name:s,token:n})&&t._sessions.find((function(e){return e.name===s})).isAdmin)return!0;return!1},this._noEmptyPassAndName=function(e){var t=e.name,s=e.password;return""!==t.trim()&&""!==s.trim()},this._nameIsFree=function(e){var s=e.userName;return!t._users.find((function(e){return e.name===s}))},this._checkRegistration=function(e){var s=e.name,n=e.password,r=t._users.find((function(e){return e.name===s}));return!!r&&r.password===n},this._wrongPassOrName=function(e){var s=e.name,n=e.password,r=t._users.find((function(e){return e.name===s}));return r?r.password!==n?++r.brutCount>t._BRUTLIMIT?"brutForce":"password":void 0:"name"},this._isBrutForce=function(e){var s=e.name;return t._users.find((function(e){return e.name===s})).brutCount>t._BRUTLIMIT},this._getUsers=function(){return new Promise((function(e){setTimeout((function(){var s=t._users.map((function(e){return{name:e.name,isAdmin:e.isAdmin}}));e(s)}),t._serverDelay)}))},this._addUser=function(e){var s=e.name,n=e.password;return new Promise((function(e){setTimeout((function(){return t._users.push({id:++t._maxId,name:s,password:n,isAdmin:!1,tasks:[],maxId:0,brutCount:0}),e({isFree:!0,register:!0})}),t._serverDelay)}))},this._checkUser=function(e){var s=e.name;return new Promise((function(e){setTimeout((function(){return t._users.find((function(e){return e.name===s}))?e({isFree:!1,register:!1}):e({isFree:!0,register:!1})}),t._serverDelay)}))},this._removeUser=function(e){var s=e.userName;return new Promise((function(e){setTimeout((function(){return t._sessions=t._sessions.filter((function(e){return e.name!==s})),t._users=t._users.filter((function(e){return e.name!==s})),e({isRemove:!0})}),t._serverDelay)}))},this._addSession=function(e){var s=e.name;return new Promise((function(e){setTimeout((function(){var n=t._createToken(),r=t._users.find((function(e){return e.name===s})),a=r.isAdmin;return r.brutCount=0,t._sessions.push({name:s,token:n,isAdmin:a}),e({isLogIn:!0,isAdmin:a,token:n,reason:""})}),t._serverDelay)}))},this._endSession=function(e){var s=e.name;return new Promise((function(e){setTimeout((function(){return t._sessions=t._sessions.filter((function(e){return e.name!==s})),e({sessionEnded:!0})}),t._serverDelay)}))},this._getTasks=function(e){var s=e.userName;return new Promise((function(e){setTimeout((function(){var n=t._users.find((function(e){return e.name===s})),r=n?n.tasks:[];e(r)}),t._serverDelay)}))},this._addTask=function(e){var s=e.userName,n=e.title;return new Promise((function(e){var r=t._users.find((function(e){return e.name===s}));r.tasks.push({id:++r.maxId,title:n}),setTimeout((function(){e({taskAdded:!0})}),t._serverDelay)}))},this._editTask=function(e){var s=e.userName,n=e.id,r=e.title;return new Promise((function(e){setTimeout((function(){t._users.find((function(e){return e.name===s})).tasks.find((function(e){return e.id===n})).title=r,e({taskEdited:!0})}),t._serverDelay)}))},this._removeTask=function(e){var s=e.userName,n=e.id;return new Promise((function(e){setTimeout((function(){var r=t._users.find((function(e){return e.name===s}));r.tasks=r.tasks.filter((function(e){return e.id!==n})),e({taskRemoved:!0})}),t._serverDelay)}))},this._denial=function(e){return new Promise((function(s){setTimeout((function(){return s({isLogIn:!1,isAdmin:!1,reason:e})}),t._serverDelay)}))},this._error=function(e){return new Promise((function(s,n){setTimeout((function(){n(e)}),t._serverDelay)}))},this._createToken=function(){return 1}},P=function e(){var t=this;Object(o.a)(this,e),this.name="",this.token="",this.getUsers=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("getUsers",{name:t.name,token:t.token});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.addUser=function(){var e=Object(A.a)(I.a.mark((function e(s,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=4;break}return e.next=3,t.server.request("checkUser",{userName:s});case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,t.server.request("addUser",{name:s,password:n});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),this.removeUser=function(){var e=Object(A.a)(I.a.mark((function e(s){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("removeUser",{name:t.name,token:t.token,userName:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.editUser=function(){var e=Object(A.a)(I.a.mark((function e(t,s){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),this.logIn=function(){var e=Object(A.a)(I.a.mark((function e(s,n){var r,a,i,o,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("login",{name:s,password:n});case 2:return r=e.sent,a=r.isLogIn,i=r.isAdmin,o=r.token,c=r.reason,a&&(t.name=s),t.token=o,e.abrupt("return",{isLogIn:a,isAdmin:i,reason:c});case 10:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),this.logOut=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("logOut",{name:t.name,token:t.token});case 2:return e.sent.sessionEnded&&(t.name="",t.token=""),e.abrupt("return");case 5:case"end":return e.stop()}}),e)}))),this.getTasks=function(){var e=Object(A.a)(I.a.mark((function e(s){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("getTasks",{name:t.name,token:t.token,userName:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTask=function(){var e=Object(A.a)(I.a.mark((function e(s,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("addTask",{name:t.name,title:n,token:t.token,userName:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),this.removeTask=function(){var e=Object(A.a)(I.a.mark((function e(s,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("removeTask",{name:t.name,id:n,token:t.token,userName:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),this.editTask=function(){var e=Object(A.a)(I.a.mark((function e(s,n,r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.server.request("editTask",{name:t.name,id:n,title:r,token:t.token,userName:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}(),this.server=new O},L=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={screen:"login",isLogIn:!1,isAdmin:!1,name:"",texts:d,error:!1},e.logOut=function(){e.state.isLogIn?e.server.logOut().then((function(){e.setState({screen:"login",isLogIn:!1,isAdmin:!1,name:""})})).catch((function(){e.setState({error:!0})})):e.setState({screen:"register"})},e.logged=function(t,s,n){e.setState({screen:s?"usersList":"taskList",isLogIn:t,isAdmin:s,name:n})},e.registerSuccess=function(){e.setState({screen:"login"}),e.createPopup(e.state.texts.app.successfulRegister)},e.showUserTasks=function(t){e.setState({name:t,screen:"taskList"})},e.backToUsersList=function(){e.state.isAdmin?e.setState({name:"",screen:"usersList"}):e.setState({error:!0})},e.changeLanguage=function(t){t?e.setState({texts:p}):e.setState({texts:d})},e.createPopup=function(e){var t=document.createElement("div");t.innerText=e,t.classList.add("popup-show"),document.body.appendChild(t),setTimeout((function(){var e=document.querySelector(".popup-show");e.parentNode.removeChild(e)}),3e3)},e.server=new P,e}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.texts.app;return this.state.error?r.a.createElement(h,{message:t.LogOutErrormessage}):r.a.createElement("div",{className:"app"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-2"},r.a.createElement("a",{href:"#",className:"brand-logo center"},t.title),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"switch left"},r.a.createElement("label",null,"EN",r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.changeLanguage(t.target.checked)}}),r.a.createElement("span",{className:"lever"}),"RU")),r.a.createElement("button",{onClick:this.logOut,className:"login-btn waves-effect waves-light btn right"},this.state.isLogIn?t.btnLogOut:t.btnRegister)))),r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"left-panel"},t.leftPanel),r.a.createElement(T,{screen:this.state.screen,registerSuccess:this.registerSuccess,logged:this.logged,showUserTasks:this.showUserTasks,backToUsersList:this.backToUsersList,isAdmin:this.state.isAdmin,name:this.state.name,server:this.server,texts:this.state.texts}),r.a.createElement("div",{className:"right-panel"},t.rightPanel)),r.a.createElement("footer",{className:"page-footer blue darken-2"},r.a.createElement("div",{className:"container"},t.footer),r.a.createElement("div",{className:"footer-copyright"},r.a.createElement("div",{className:"container"},t.copyright))))}}]),t}(n.Component);i.a.render(r.a.createElement(L,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.7ca5560d.chunk.js.map